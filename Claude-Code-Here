#!/bin/bash

# Claude Code快速启动脚本
# 使用方法：在任意文件夹中运行此脚本

# 设置PATH
export PATH="$HOME/.nvm/versions/node/v22.17.1/bin:$HOME/.npm-global/bin:/usr/local/bin:/opt/homebrew/bin:$PATH"

# 获取当前Finder路径
CURRENT_PATH=$(osascript -e '
tell application "Finder"
    try
        set currentPath to POSIX path of (target of front window as alias)
    on error
        set currentPath to POSIX path of (path to desktop)
    end try
end tell
')

# 如果获取失败，使用当前工作目录
if [ -z "$CURRENT_PATH" ]; then
    CURRENT_PATH=$(pwd)
fi

echo "在目录启动Claude Code: $CURRENT_PATH"

# 启动Terminal并运行Claude Code
osascript -e "
tell application \"Terminal\"
    activate
    do script \"cd '$CURRENT_PATH' && claude\"
end tell
"